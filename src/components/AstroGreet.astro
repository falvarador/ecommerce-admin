---
const { message = "Welcome, world!" } = Astro.props;
---

<!-- Store the message prop as a data attribute. -->
<astro-greet data-message={message}>
  <button class="btn btn-primary">Say hi!</button>
</astro-greet>

<script>
  class AstroGreet extends HTMLElement {
    connectedCallback() {
      // Read the message from the data attribute.
      const message = this.dataset.message;
      const button = this.querySelector<HTMLButtonElement>("button");
      button?.addEventListener("click", () => {
        alert(message);
      });
    }
  }

  customElements.define("astro-greet", AstroGreet);
</script>
